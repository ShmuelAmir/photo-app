(this["webpackJsonpphoto-app"]=this["webpackJsonpphoto-app"]||[]).push([[0],{157:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(32),i=n.n(r),s=n(21),l=n(49),o=n(209),j=n(14),u=n(226),b=n(227),O=n(228),h=n(224),d=n(210),g=n(225),x=n(12),f=n(221),p=n(107),m=n(219),v=n(217),k=n(223),y=n(216),C=n(199),S=function(e,t){localStorage.setItem(e,JSON.stringify(t))},w=function(e){return JSON.parse(localStorage.getItem(e))||[]},I=function(e,t){var n=w(e);-1===n.indexOf(t)&&(n.push(t),S(e,n))},T=function(e,t){var n=w(e);n.splice(n.indexOf(t),1),S(e,n)},F=n(1);var M=function(e){var t=e.handleChange,n=e.value,c=Object(a.useState)(null),r=Object(x.a)(c,2),i=r[0],s=r[1],l=w("tags");return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{onClick:function(e){return s(e.currentTarget)},children:Object(F.jsx)(C.a,{})}),Object(F.jsx)(p.a,{anchorEl:i,open:Boolean(i),onClose:function(){return s(null)},children:Object(F.jsxs)(m.a,{value:n,onChange:function(e){t(e.target.value)},children:[l.map((function(e){return Object(F.jsx)(v.a,{children:Object(F.jsx)(k.a,{value:e,control:Object(F.jsx)(y.a,{}),label:e})},e)})),Object(F.jsx)(v.a,{children:Object(F.jsx)(k.a,{value:"all",control:Object(F.jsx)(y.a,{}),label:"all"})},"all")]})})]})},E=n(214);var Y=function(){var e=Object(a.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1];return Object(F.jsx)(E.a,{size:"small",color:"success",value:n,onChange:function(e){c(e.target.value)},onKeyPress:function(e){""!==n&&"Enter"===e.key&&(I("tags",n),c(""))},placeholder:"add tag..."})},R=n(206);var D,A=function(){var e=Object(a.useState)(null),t=Object(x.a)(e,2),n=t[0],c=t[1],r=Object(j.f)(),i=function(){c(null)},s=function(e){i(),r("photo-app/date/".concat(e.target.innerText))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{onClick:function(e){return c(e.currentTarget)},children:Object(F.jsx)(R.a,{})}),Object(F.jsxs)(p.a,{anchorEl:n,open:Boolean(n),onClose:i,children:[Object(F.jsx)(v.a,{divider:!0,onClick:s,children:"day"}),Object(F.jsx)(v.a,{divider:!0,onClick:s,children:"month"}),Object(F.jsx)(v.a,{onClick:s,children:"year"})]})]})},B=n(207),P=n(208),U=n(3),z=n(29),J=n(88),H=n.n(J),N=n(104),G=n(65),L=n(105),q=n.n(L),K="https://www.googleapis.com/customsearch/v1?key=".concat("AIzaSyCtHHv1TEIlus2fYwOR_ZdB4P3y-MnEm4o","&cx=").concat("2baf5dc630067a92c&cx=2baf5dc630067a92c","&searchType=image&imgSize=medium&q="),Z=function(){var e=29*Math.random(),t=11*Math.random(),n=21*Math.random()+2e3;return new Date(n,t,e).toString()},_=Object(G.b)("image/fetchAsyncImages",function(){var e=Object(N.a)(H.a.mark((function e(t){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.get(K+t);case 2:return n=e.sent,e.abrupt("return",n.data.items.map((function(e){return{title:e.title,link:e.link,date:Z()}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Q=Object(G.c)({name:"image",initialState:{images:[],lastResult:[],status:null,favorite:!0,initTag:"all"},reducers:{setImages:function(e,t){e.images=t.payload},setLastResult:function(e,t){e.lastResult=t.payload},setFavorite:function(e,t){e.favorite=t.payload},setInitTag:function(e,t){e.initTag=t.payload},clearAll:function(e){e.images=[],e.lastResult=[],e.favorite=!0,e.initTag="all"}},extraReducers:(D={},Object(U.a)(D,_.pending,(function(e){return Object(z.a)(Object(z.a)({},e),{},{status:"loading"})})),Object(U.a)(D,_.fulfilled,(function(e,t){return Object(z.a)(Object(z.a)({},e),{},{images:t.payload,lastResult:t.payload,status:null})})),Object(U.a)(D,_.rejected,(function(e){return Object(z.a)(Object(z.a)({},e),{},{status:null})})),D)}),V=Q.actions,W=(V.setInput,V.setImages),X=(V.setLastResult,V.setFavorite),$=V.setInitTag,ee=V.clearAll,te=function(e){return e.image.status},ne=function(e){return e.image.images},ae=function(e){return e.image.lastResult},ce=function(e){return e.image.favorite},re=function(e){return e.image.initTag},ie=Q.reducer;var se=function(){var e=Object(s.b)(),t=Object(s.c)(ae),n=Object(s.c)(ce);return Object(F.jsx)(f.a,{onClick:function(){e(X(!n)),e(W(n?w("favorite"):t))},children:n?Object(F.jsx)(B.a,{}):Object(F.jsx)(P.a,{})})};var le=function(){var e=Object(s.b)(),t=Object(s.c)(ae),n=Object(s.c)(re);return Object(F.jsxs)(g.a,{variant:"contained",disableElevation:!0,children:[Object(F.jsx)(se,{}),Object(F.jsx)(A,{}),Object(F.jsx)(M,{handleChange:function(n){e(W("all"===n?t:w(n))),e($(n))},value:n}),Object(F.jsx)(Y,{})]})};var oe=function(){var e=Object(j.f)(),t=Object(s.b)();return Object(F.jsx)(u.a,{sx:{flexGrow:1},children:Object(F.jsx)(b.a,{children:Object(F.jsxs)(O.a,{children:[Object(F.jsxs)(o.a,{direction:"row",alignItems:"center",spacing:2,sx:{flexGrow:1},onClick:function(){t(ee()),e("photo-app/")},children:[Object(F.jsx)(d.a,{sx:{cursor:"pointer"}}),Object(F.jsx)(h.a,{variant:"h6",sx:{cursor:"pointer"},children:"Photos"})]}),Object(F.jsx)(le,{})]})})})},je=n(222),ue=n(25),be=n(229),Oe=n(230),he=n(211);var de=function(){var e=Object(s.b)(),t=Object(a.useState)(""),n=Object(x.a)(t,2),c=n[0],r=n[1],i=Object(s.c)(te);return Object(F.jsxs)(je.a,{onSubmit:function(t){t.preventDefault(),""!==c&&(e(_(c)),r(""))},elevation:3,component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:450,height:50},children:[Object(F.jsx)(ue.c,{value:c,onChange:function(e){r(e.target.value)},sx:{ml:1,flex:1},placeholder:"Search Images...",inputProps:{"aria-label":"Search Image"}}),Object(F.jsx)(be.a,{type:"submit",sx:{p:"10px"},"aria-label":"search",children:"loading"===i?Object(F.jsx)(Oe.a,{size:24}):Object(F.jsx)(he.a,{})})]})},ge=n(220),xe=n(106),fe=n.n(xe),pe=n(231),me=n(232),ve=n(233),ke=n(234),ye=n(213),Ce=n(218),Se=n(212);var we=function(e){for(var t=e.image,n=w("favorite"),c=Boolean(n.find((function(e){return e.link===t.link}))),r=Object(a.useState)(c),i=Object(x.a)(r,2),s=i[0],l=i[1],o=w("tags"),j="all",u=0;u<o.length;u++)if(Boolean(w(o[u]).find((function(e){return e.link===t.link})))){j=o[u];break}var b=Object(a.useState)(j),O=Object(x.a)(b,2),h=O[0],d=O[1];return Object(F.jsx)(ge.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(me.a,{title:t.title.lenght<25?t.title:t.title.slice(0,25)}),Object(F.jsx)(ve.a,{component:"img",height:"200",image:t.link,alt:t.title}),Object(F.jsxs)(ke.a,{children:[Object(F.jsx)(ye.a,{title:"add to favorite",children:Object(F.jsx)(Ce.a,{checked:s,onChange:function(e){l(e.target.checked),s?T("favorite",t):I("favorite",t)},icon:Object(F.jsx)(B.a,{}),checkedIcon:Object(F.jsx)(P.a,{})})}),Object(F.jsx)(fe.a,{label:Object(F.jsx)(ye.a,{title:"save photo",children:Object(F.jsx)(be.a,{children:Object(F.jsx)(Se.a,{})})}),filename:t.title+".png",exportFile:function(){return Promise.resolve((e=t.link,new Promise((function(t){fetch(e).then((function(e){return e.blob()})).then((function(e){t(e)})).catch((function(e){console.error(e)}))}))));var e}}),Object(F.jsx)(M,{handleChange:function(e){"all"!==h&&T(h,t),"all"!==e&&I(e,t),d(e)},value:h})]})]})})};var Ie=function(){var e=Object(s.c)(ne);return Object(F.jsx)(ge.a,{container:!0,spacing:2,children:e.map((function(e){return Object(F.jsx)(we,{image:e},e.link)}))})};var Te=function(){for(var e=Object(j.g)().dateMonthYear,t=Object(s.c)(ne).map((function(e){return Object(z.a)(Object(z.a)({},e),{},{date:new Date(e.date)})})).sort((function(e,t){return e.date-t.date})),n=new Date("1/1/1500"),a=[],c=[],r=0;r<t.length;r++){var i=t[r],l=i.date;switch(e){case"day":l.toDateString()!==n.toDateString()&&(0!==c.length&&a.push(c),c=[],a.push("".concat(l.getUTCDate(),"/").concat(l.getUTCMonth()+1,"/").concat(l.getUTCFullYear())),n=l);break;case"month":l.getMonth()===n.getMonth()&&l.getYear()===n.getYear()||(0!==c.length&&a.push(c),c=[],a.push("".concat(l.getUTCMonth()+1,"/").concat(l.getUTCFullYear())),n=l);break;case"year":l.getYear()!==n.getYear()&&(0!==c.length&&a.push(c),c=[],a.push("".concat(l.getUTCFullYear())),n=l)}c.push({link:i.link,title:i.title})}a.push(c);var o=0;return Object(F.jsx)(F.Fragment,{children:a.map((function(e){return"string"===typeof e?Object(F.jsx)("h2",{children:e},e):Object(F.jsx)(ge.a,{container:!0,spacing:2,children:e.map((function(e){return Object(F.jsx)(we,{image:e},e.link)}))},o++)}))})};var Fe=function(){return Object(F.jsx)(o.a,{bgcolor:"#EAEEF3",spacing:2,alignItems:"center",mt:7,p:5,minHeight:"100vh",children:Object(F.jsxs)(j.c,{children:[Object(F.jsx)(j.a,{path:"photo-app/",element:Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(de,{}),Object(F.jsx)(Ie,{})]})}),Object(F.jsx)(j.a,{path:"photo-app/date/:dateMonthYear",element:Object(F.jsx)(Te,{})})]})})};var Me=function(){return Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(o.a,{children:Object(F.jsxs)(l.a,{children:[Object(F.jsx)(oe,{}),Object(F.jsx)(Fe,{})]})})})},Ee=Object(G.a)({reducer:{image:ie}});i.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(s.a,{store:Ee,children:Object(F.jsx)(Me,{})})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.6bdaa645.chunk.js.map